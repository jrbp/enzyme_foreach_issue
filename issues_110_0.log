simple run  for    : 0.000000 seconds
simple run  for    : 0.000001 seconds
simple run  foreach: 0.000002 seconds (21 allocations: 336 bytes)
simple run  foreach: 0.000001 seconds (21 allocations: 336 bytes)
simple grad for    : 0.000001 seconds
simple grad for    : 0.000000 seconds
simple grad foreach: 1.716079 seconds (1.53 M allocations: 109.503 MiB, 1.44% gc time, 99.99% compilation time)
simple grad foreach: 0.000034 seconds (87 allocations: 3.844 KiB)
End simple cases
Project enzyme_test v0.1.0
Status `~/git/temp/enzyme_foreach/Project.toml`
⌃ [b0b7db55] ComponentArrays v0.15.14
⌃ [7da242da] Enzyme v0.12.22
  [37e2e46d] LinearAlgebra
  [9a3f8284] Random
Info Packages marked with ⌃ have new versions available and may be upgradable.
nothing
for, primal run
  0.000189 seconds (241 allocations: 10.641 KiB)
  0.000356 seconds (241 allocations: 10.641 KiB)
  0.000686 seconds (241 allocations: 10.641 KiB)
  0.001150 seconds (241 allocations: 10.641 KiB)
  0.001912 seconds (241 allocations: 10.641 KiB)
  0.002960 seconds (241 allocations: 10.641 KiB)
  0.004140 seconds (241 allocations: 10.641 KiB)
foreach, primal run
  0.000116 seconds (40 allocations: 960 bytes)
  0.000277 seconds (40 allocations: 960 bytes)
  0.000923 seconds (40 allocations: 960 bytes)
  0.001290 seconds (40 allocations: 960 bytes)
  0.001797 seconds (40 allocations: 960 bytes)
  0.003573 seconds (40 allocations: 960 bytes)
  0.004040 seconds (40 allocations: 960 bytes)

for, grad run
  0.013227 seconds (8.79 k allocations: 441.719 KiB)
  0.009463 seconds (8.79 k allocations: 441.297 KiB)
  0.014025 seconds (8.79 k allocations: 441.297 KiB)
  0.023083 seconds (8.79 k allocations: 441.297 KiB)
  0.036881 seconds (8.79 k allocations: 441.297 KiB)
  0.045186 seconds (8.81 k allocations: 444.422 KiB)
  0.059298 seconds (8.81 k allocations: 444.422 KiB)
foreach, grad run
  0.004978 seconds (14.60 k allocations: 1.673 MiB)
  0.023956 seconds (18.52 k allocations: 3.119 MiB, 56.76% gc time)
  0.018144 seconds (21.18 k allocations: 5.025 MiB)
  0.036849 seconds (22.86 k allocations: 7.034 MiB)
  0.069384 seconds (24.54 k allocations: 9.960 MiB, 31.98% gc time)
  0.074394 seconds (26.10 k allocations: 13.936 MiB)
  0.100396 seconds (27.78 k allocations: 19.225 MiB)

for, primal comp
  2.491012 seconds (3.97 M allocations: 269.938 MiB, 2.84% gc time)
  0.808347 seconds (1.16 M allocations: 77.967 MiB, 2.76% gc time)
  0.786325 seconds (1.16 M allocations: 78.010 MiB, 1.91% gc time)
  0.838702 seconds (1.16 M allocations: 78.028 MiB, 3.09% gc time)
  0.838670 seconds (1.16 M allocations: 78.273 MiB, 2.47% gc time)
  0.829687 seconds (1.16 M allocations: 77.982 MiB, 2.61% gc time)
  0.846948 seconds (1.16 M allocations: 77.984 MiB)
foreach, primal comp
  1.274852 seconds (1.70 M allocations: 109.071 MiB, 1.19% gc time)
  0.403177 seconds (495.58 k allocations: 31.653 MiB, 3.71% gc time)
  0.404066 seconds (495.59 k allocations: 31.650 MiB)
  0.410726 seconds (495.62 k allocations: 31.652 MiB, 4.13% gc time)
  0.413370 seconds (495.64 k allocations: 31.669 MiB)
  0.435556 seconds (495.69 k allocations: 31.652 MiB)
  0.471285 seconds (495.71 k allocations: 31.689 MiB, 10.80% gc time)

note: first gradient comp always takes longer
for, grad comp
 32.823426 seconds (51.78 M allocations: 3.188 GiB, 2.66% gc time)
 10.983922 seconds (17.08 M allocations: 1.023 GiB, 2.61% gc time)
 11.227327 seconds (17.14 M allocations: 1.025 GiB, 2.86% gc time)
 10.928971 seconds (17.19 M allocations: 1.027 GiB, 2.12% gc time)
 10.629239 seconds (17.24 M allocations: 1.029 GiB, 2.56% gc time)
 11.698279 seconds (17.29 M allocations: 1.031 GiB, 2.64% gc time)
 11.713085 seconds (17.35 M allocations: 1.033 GiB, 2.56% gc time)
foreach, grad comp
 40.512975 seconds (48.29 M allocations: 2.495 GiB, 3.59% gc time)
 34.484395 seconds (39.59 M allocations: 1.905 GiB, 2.38% gc time)
 33.820767 seconds (39.70 M allocations: 1.909 GiB, 1.49% gc time)
 35.218519 seconds (39.80 M allocations: 1.915 GiB, 3.20% gc time)
 34.923570 seconds (39.90 M allocations: 1.922 GiB, 1.57% gc time)
 36.030659 seconds (40.00 M allocations: 1.934 GiB, 1.67% gc time)
 34.855326 seconds (40.10 M allocations: 1.938 GiB, 1.49% gc time)

